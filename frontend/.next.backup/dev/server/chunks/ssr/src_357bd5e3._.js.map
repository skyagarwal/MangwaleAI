{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/src/lib/api/llm.ts"],"sourcesContent":["/**\n * LLM API Service\n * Handles all API calls to the mangwale-ai backend LLM endpoints\n */\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_AI_BACKEND_URL || 'http://localhost:3200';\n\nexport interface ModelInfo {\n  id: string;\n  name: string;\n  provider: string;\n  cost: 'free' | 'paid';\n  purpose: string[];\n  capabilities: {\n    chat: boolean;\n    completion: boolean;\n    functions: boolean;\n    vision: boolean;\n    streaming: boolean;\n  };\n  pricing?: {\n    input: number;\n    output: number;\n    currency: string;\n    free?: boolean;\n  };\n  contextLength?: number;\n  languages?: string[];\n  description?: string;\n}\n\nexport interface ProviderStats {\n  name: string;\n  modelCount: number;\n  freeModels: number;\n  paidModels: number;\n  freeModelsWithIndianLanguages: number;\n  capabilities: string[];\n}\n\nexport interface UsageAnalytics {\n  performance: {\n    totalRequests: number;\n    successCount: number;\n    errorCount: number;\n    timeoutCount: number;\n    successRate: number;\n    averageLatency: number;\n    minLatency: number;\n    maxLatency: number;\n    providerPerformance: Array<{\n      provider: string;\n      requestCount: number;\n      averageLatency: number;\n    }>;\n  };\n  popularModels: Array<{\n    modelId: string;\n    modelName: string;\n    provider: string;\n    usageCount: number;\n    totalCost: number;\n    totalTokens: number;\n  }>;\n  costTrends: Array<{\n    date: string;\n    totalCost: number;\n    totalRequests: number;\n    totalTokens: number;\n  }>;\n}\n\nexport interface ModelUsageStats {\n  totalRequests: number;\n  successRate: number;\n  totalTokens: number;\n  totalCost: number;\n  averageLatency: number;\n}\n\nexport interface ProviderUsageStats {\n  totalRequests: number;\n  successRate: number;\n  totalTokens: number;\n  totalCost: number;\n  averageLatency: number;\n  topModels: Array<{\n    modelId: string;\n    count: number;\n  }>;\n}\n\nclass LlmApiService {\n  private baseUrl: string;\n\n  constructor() {\n    this.baseUrl = `${API_BASE_URL}/llm`;\n  }\n\n  /**\n   * Get all available models with optional filters\n   */\n  async getModels(params?: {\n    provider?: string;\n    cost?: 'free' | 'paid';\n    purpose?: string;\n    refresh?: boolean;\n  }): Promise<{ models: ModelInfo[]; count: number }> {\n    const queryParams = new URLSearchParams();\n    if (params?.provider) queryParams.append('provider', params.provider);\n    if (params?.cost) queryParams.append('cost', params.cost);\n    if (params?.purpose) queryParams.append('purpose', params.purpose);\n    if (params?.refresh) queryParams.append('refresh', 'true');\n\n    const url = `${this.baseUrl}/models${queryParams.toString() ? `?${queryParams.toString()}` : ''}`;\n    const response = await fetch(url);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch models: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get model details by ID\n   */\n  async getModelById(modelId: string): Promise<ModelInfo> {\n    const response = await fetch(\n      `${this.baseUrl}/models/${encodeURIComponent(modelId)}`\n    );\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch model: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get all free models\n   */\n  async getFreeModels(): Promise<{ models: ModelInfo[]; count: number }> {\n    const response = await fetch(`${this.baseUrl}/models/free/all`);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch free models: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get free models with Indian language support\n   */\n  async getFreeIndianLanguageModels(): Promise<{\n    models: ModelInfo[];\n    count: number;\n    languages: string[];\n  }> {\n    const response = await fetch(`${this.baseUrl}/models/free/indian-languages`);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch Indian language models: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get models by purpose\n   */\n  async getModelsByPurpose(purpose: string): Promise<{\n    models: ModelInfo[];\n    count: number;\n  }> {\n    const response = await fetch(`${this.baseUrl}/models/purpose/${purpose}`);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch models by purpose: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get provider statistics\n   */\n  async getProviders(): Promise<{ providers: ProviderStats[] }> {\n    const response = await fetch(`${this.baseUrl}/providers`);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch providers: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Estimate cost for a request\n   */\n  async estimateCost(params: {\n    tokens: number;\n    model: string;\n  }): Promise<{\n    estimatedCost: number;\n    breakdown?: {\n      inputCost: number;\n      outputCost: number;\n      currency: string;\n      model: string;\n    };\n  }> {\n    const response = await fetch(`${this.baseUrl}/estimate-cost`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(params),\n    });\n    \n    if (!response.ok) {\n      throw new Error(`Failed to estimate cost: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get usage analytics\n   */\n  async getUsageAnalytics(params?: {\n    userId?: string;\n    startDate?: string;\n    endDate?: string;\n  }): Promise<UsageAnalytics> {\n    const queryParams = new URLSearchParams();\n    if (params?.userId) queryParams.append('userId', params.userId);\n    if (params?.startDate) queryParams.append('startDate', params.startDate);\n    if (params?.endDate) queryParams.append('endDate', params.endDate);\n\n    const url = `${this.baseUrl}/analytics/usage${queryParams.toString() ? `?${queryParams.toString()}` : ''}`;\n    const response = await fetch(url);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch analytics: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get cost analytics with time grouping\n   */\n  async getCostAnalytics(params?: {\n    groupBy?: 'day' | 'week' | 'month';\n    startDate?: string;\n    endDate?: string;\n  }): Promise<Array<{\n    date: string;\n    totalCost: number;\n    totalRequests: number;\n    totalTokens: number;\n  }>> {\n    const queryParams = new URLSearchParams();\n    if (params?.groupBy) queryParams.append('groupBy', params.groupBy);\n    if (params?.startDate) queryParams.append('startDate', params.startDate);\n    if (params?.endDate) queryParams.append('endDate', params.endDate);\n\n    const url = `${this.baseUrl}/analytics/costs${queryParams.toString() ? `?${queryParams.toString()}` : ''}`;\n    const response = await fetch(url);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch cost analytics: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get popular models\n   */\n  async getPopularModels(params?: {\n    limit?: number;\n    startDate?: string;\n    endDate?: string;\n  }): Promise<Array<{\n    modelId: string;\n    modelName: string;\n    provider: string;\n    usageCount: number;\n    totalCost: number;\n    totalTokens: number;\n  }>> {\n    const queryParams = new URLSearchParams();\n    if (params?.limit) queryParams.append('limit', params.limit.toString());\n    if (params?.startDate) queryParams.append('startDate', params.startDate);\n    if (params?.endDate) queryParams.append('endDate', params.endDate);\n\n    const url = `${this.baseUrl}/analytics/popular-models${queryParams.toString() ? `?${queryParams.toString()}` : ''}`;\n    const response = await fetch(url);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch popular models: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get performance metrics\n   */\n  async getPerformanceMetrics(params?: {\n    startDate?: string;\n    endDate?: string;\n  }): Promise<UsageAnalytics['performance']> {\n    const queryParams = new URLSearchParams();\n    if (params?.startDate) queryParams.append('startDate', params.startDate);\n    if (params?.endDate) queryParams.append('endDate', params.endDate);\n\n    const url = `${this.baseUrl}/analytics/performance${queryParams.toString() ? `?${queryParams.toString()}` : ''}`;\n    const response = await fetch(url);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch performance metrics: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get model-specific analytics\n   */\n  async getModelAnalytics(\n    modelId: string,\n    params?: {\n      startDate?: string;\n      endDate?: string;\n    }\n  ): Promise<ModelUsageStats> {\n    const queryParams = new URLSearchParams();\n    if (params?.startDate) queryParams.append('startDate', params.startDate);\n    if (params?.endDate) queryParams.append('endDate', params.endDate);\n\n    const url = `${this.baseUrl}/analytics/model/${encodeURIComponent(modelId)}${queryParams.toString() ? `?${queryParams.toString()}` : ''}`;\n    const response = await fetch(url);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch model analytics: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get provider-specific analytics\n   */\n  async getProviderAnalytics(\n    provider: string,\n    params?: {\n      startDate?: string;\n      endDate?: string;\n    }\n  ): Promise<ProviderUsageStats> {\n    const queryParams = new URLSearchParams();\n    if (params?.startDate) queryParams.append('startDate', params.startDate);\n    if (params?.endDate) queryParams.append('endDate', params.endDate);\n\n    const url = `${this.baseUrl}/analytics/provider/${provider}${queryParams.toString() ? `?${queryParams.toString()}` : ''}`;\n    const response = await fetch(url);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch provider analytics: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Check LLM service health\n   */\n  async checkHealth(): Promise<{ status: string; providers: string[] }> {\n    const response = await fetch(`${this.baseUrl}/health`);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to check health: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get local vLLM model info\n   */\n  async getLocalVllmInfo(): Promise<ModelInfo | null> {\n    try {\n      const response = await fetch('http://localhost:8002/v1/models');\n      if (!response.ok) return null;\n      \n      const data = await response.json();\n      const model = data.data?.[0];\n      if (!model) return null;\n\n      // Create ModelInfo from vLLM response\n      return {\n        id: model.id,\n        name: model.id.split('/').pop() || model.id,\n        provider: 'vllm-local',\n        cost: 'free' as const,\n        purpose: ['chat', 'completion', 'reasoning'],\n        capabilities: {\n          chat: true,\n          completion: true,\n          functions: true,\n          vision: false,\n          streaming: true,\n        },\n        contextLength: 4096, // From our docker-compose config\n        languages: ['English', 'Hindi', 'Chinese'], // Qwen supports these\n        description: `Local vLLM instance running ${model.id} - GPU-accelerated inference on RTX 3060`,\n      };\n    } catch (error) {\n      console.error('Failed to fetch local vLLM info:', error);\n      return null;\n    }\n  }\n}\n\n// Export singleton instance\nexport const llmApi = new LlmApiService();\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 228, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/admin/llm-chat/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { llmApi, ModelInfo } from '@/lib/api/llm';\nimport { Send, RotateCcw, TrendingUp, Zap, Eye } from 'lucide-react';\n\ninterface Message {\n  id: string;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: Date;\n  modelUsed?: string;\n  tokens?: number;\n  cost?: number;\n  latency?: number;\n}\n\nexport default function LlmChatPage() {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [models, setModels] = useState<ModelInfo[]>([]);\n  const [selectedModel, setSelectedModel] = useState<string>('');\n  const [estimatedCost, setEstimatedCost] = useState<number>(0);\n  const [filterCost, setFilterCost] = useState<'all' | 'free' | 'paid'>('all');\n  const [filterProvider, setFilterProvider] = useState<string>('all');\n  const [providers, setProviders] = useState<string[]>([]);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  // Load models on mount\n  useEffect(() => {\n    loadModels();\n  }, [filterCost, filterProvider]);\n\n  // Auto-scroll to bottom when messages change\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // Estimate cost when input changes\n  useEffect(() => {\n    if (input && selectedModel) {\n      // Rough estimate: ~4 chars per token\n      const estimatedTokens = Math.ceil(input.length / 4);\n      llmApi.estimateCost({ tokens: estimatedTokens, model: selectedModel })\n        .then(result => setEstimatedCost(result.estimatedCost))\n        .catch(() => setEstimatedCost(0));\n    } else {\n      setEstimatedCost(0);\n    }\n  }, [input, selectedModel]);\n\n  const loadModels = async () => {\n    try {\n      const params: any = {};\n      if (filterCost !== 'all') params.cost = filterCost;\n      if (filterProvider !== 'all') params.provider = filterProvider;\n\n      const { models: allModels } = await llmApi.getModels(params);\n      \n      // Filter for chat-capable models\n      const chatModels = allModels.filter(m => m.capabilities?.chat);\n      setModels(chatModels);\n\n      // Extract unique providers\n      const uniqueProviders = Array.from(new Set(chatModels.map(m => m.provider)));\n      setProviders(uniqueProviders);\n      \n      // Set default model (prefer free models)\n      if (!selectedModel) {\n        const defaultModel = chatModels.find(m => m.cost === 'free') || chatModels[0];\n        if (defaultModel) {\n          setSelectedModel(defaultModel.id);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to load models:', error);\n    }\n  };\n\n  const sendMessage = async () => {\n    if (!input.trim() || !selectedModel) return;\n\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: input,\n      timestamp: new Date(),\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setInput('');\n    setIsLoading(true);\n\n    try {\n      const startTime = Date.now();\n      \n      // Call the chat endpoint\n      const response = await fetch('http://localhost:3200/llm/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          messages: [\n            { role: 'user', content: userMessage.content }\n          ],\n          model: selectedModel,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Chat request failed: ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      const latency = Date.now() - startTime;\n\n      const assistantMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: data.content || data.response || data.message || 'No response',\n        timestamp: new Date(),\n        modelUsed: selectedModel,\n        tokens: data.usage?.totalTokens || data.usage?.total_tokens,\n        cost: data.estimatedCost || data.cost,\n        latency,\n      };\n\n      setMessages(prev => [...prev, assistantMessage]);\n    } catch (error) {\n      console.error('Chat error:', error);\n      const errorMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: `Error: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        timestamp: new Date(),\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  const clearChat = () => {\n    setMessages([]);\n  };\n\n  const selectedModelInfo = models.find(m => m.id === selectedModel);\n\n  // Calculate session stats\n  const sessionStats = {\n    totalMessages: messages.filter(m => m.role === 'assistant').length,\n    totalCost: messages.reduce((sum, m) => sum + (m.cost || 0), 0),\n    totalTokens: messages.reduce((sum, m) => sum + (m.tokens || 0), 0),\n    avgLatency: messages.filter(m => m.latency).length > 0\n      ? messages.reduce((sum, m) => sum + (m.latency || 0), 0) / messages.filter(m => m.latency).length\n      : 0,\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-50\">\n      {/* Sidebar */}\n      <div className=\"w-80 bg-white border-r border-gray-200 flex flex-col\">\n        <div className=\"p-4 border-b border-gray-200\">\n          <h1 className=\"text-xl font-bold text-gray-900\">LLM Chat</h1>\n          <p className=\"text-sm text-gray-500 mt-1\">Test models with live chat</p>\n        </div>\n\n        {/* Model Selector */}\n        <div className=\"p-4 border-b border-gray-200\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Model ({models.length} available)\n          </label>\n          <select\n            value={selectedModel}\n            onChange={(e) => setSelectedModel(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm\"\n          >\n            <option value=\"\">Choose a model...</option>\n            {models.map(model => (\n              <option key={model.id} value={model.id}>\n                {model.name} ({model.provider}) {model.cost === 'free' ? 'üÜì' : 'üí≥'}\n              </option>\n            ))}\n          </select>\n\n          {/* Filters */}\n          <div className=\"mt-3 space-y-2\">\n            <div>\n              <label className=\"block text-xs font-medium text-gray-600 mb-1\">Cost</label>\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => setFilterCost('all')}\n                  className={`flex-1 px-2 py-1 rounded text-xs font-medium ${\n                    filterCost === 'all' ? 'bg-indigo-600 text-white' : 'bg-gray-100 text-gray-700'\n                  }`}\n                >\n                  All\n                </button>\n                <button\n                  onClick={() => setFilterCost('free')}\n                  className={`flex-1 px-2 py-1 rounded text-xs font-medium ${\n                    filterCost === 'free' ? 'bg-green-600 text-white' : 'bg-gray-100 text-gray-700'\n                  }`}\n                >\n                  Free\n                </button>\n                <button\n                  onClick={() => setFilterCost('paid')}\n                  className={`flex-1 px-2 py-1 rounded text-xs font-medium ${\n                    filterCost === 'paid' ? 'bg-orange-600 text-white' : 'bg-gray-100 text-gray-700'\n                  }`}\n                >\n                  Paid\n                </button>\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-medium text-gray-600 mb-1\">Provider</label>\n              <select\n                value={filterProvider}\n                onChange={(e) => setFilterProvider(e.target.value)}\n                className=\"w-full px-2 py-1 border border-gray-300 rounded text-xs\"\n              >\n                <option value=\"all\">All Providers</option>\n                {providers.map(provider => (\n                  <option key={provider} value={provider}>{provider}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* Model Info */}\n        {selectedModelInfo && (\n          <div className=\"p-4 border-b border-gray-200 space-y-3\">\n            <div>\n              <h3 className=\"text-sm font-semibold text-gray-900 mb-2\">Model Details</h3>\n              <div className=\"space-y-1.5 text-sm\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Provider:</span>\n                  <span className=\"font-medium\">{selectedModelInfo.provider}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Cost:</span>\n                  <span className={`font-medium ${selectedModelInfo.cost === 'free' ? 'text-green-600' : 'text-orange-600'}`}>\n                    {selectedModelInfo.cost === 'free' ? 'üÜì Free' : 'üí≥ Paid'}\n                  </span>\n                </div>\n                {selectedModelInfo.contextLength && (\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Context:</span>\n                    <span className=\"font-medium\">{selectedModelInfo.contextLength.toLocaleString()}</span>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <h4 className=\"text-xs font-semibold text-gray-700 mb-1\">Capabilities</h4>\n              <div className=\"flex flex-wrap gap-1\">\n                {selectedModelInfo.capabilities?.chat && (\n                  <span className=\"px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs font-medium\">\n                    üí¨ Chat\n                  </span>\n                )}\n                {selectedModelInfo.capabilities?.functions && (\n                  <span className=\"px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full text-xs font-medium\">\n                    ‚öôÔ∏è Functions\n                  </span>\n                )}\n                {selectedModelInfo.capabilities?.vision && (\n                  <span className=\"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs font-medium\">\n                    üëÅÔ∏è Vision\n                  </span>\n                )}\n                {selectedModelInfo.capabilities?.streaming && (\n                  <span className=\"px-2 py-0.5 bg-orange-100 text-orange-700 rounded-full text-xs font-medium\">\n                    ‚ö° Streaming\n                  </span>\n                )}\n              </div>\n            </div>\n\n            {selectedModelInfo.purpose && selectedModelInfo.purpose.length > 0 && (\n              <div>\n                <h4 className=\"text-xs font-semibold text-gray-700 mb-1\">Best For</h4>\n                <div className=\"flex flex-wrap gap-1\">\n                  {selectedModelInfo.purpose.map((p, i) => (\n                    <span key={i} className=\"px-2 py-0.5 bg-gray-100 text-gray-700 rounded-full text-xs\">\n                      {p}\n                    </span>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Session Stats */}\n        {messages.length > 0 && (\n          <div className=\"p-4 bg-gray-50 space-y-2\">\n            <h3 className=\"text-sm font-semibold text-gray-900 mb-2\">Session Stats</h3>\n            <div className=\"space-y-1.5 text-xs\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-gray-600 flex items-center gap-1\">\n                  <Send className=\"w-3 h-3\" /> Messages\n                </span>\n                <span className=\"font-semibold\">{sessionStats.totalMessages}</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-gray-600 flex items-center gap-1\">\n                  <TrendingUp className=\"w-3 h-3\" /> Tokens\n                </span>\n                <span className=\"font-semibold\">{sessionStats.totalTokens.toLocaleString()}</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-gray-600 flex items-center gap-1\">\n                  <Zap className=\"w-3 h-3\" /> Avg Latency\n                </span>\n                <span className=\"font-semibold\">{Math.round(sessionStats.avgLatency)}ms</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-gray-600 flex items-center gap-1\">\n                  <Eye className=\"w-3 h-3\" /> Total Cost\n                </span>\n                <span className=\"font-semibold text-green-600\">\n                  ${sessionStats.totalCost.toFixed(6)}\n                </span>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Clear Button */}\n        <div className=\"mt-auto p-4\">\n          <button\n            onClick={clearChat}\n            disabled={messages.length === 0}\n            className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <RotateCcw className=\"w-4 h-4\" />\n            Clear Chat\n          </button>\n        </div>\n      </div>\n\n      {/* Main Chat Area */}\n      <div className=\"flex-1 flex flex-col\">\n        {/* Header */}\n        <div className=\"bg-white border-b border-gray-200 px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h2 className=\"text-lg font-semibold text-gray-900\">\n                {selectedModelInfo ? selectedModelInfo.name : 'Select a model to start'}\n              </h2>\n              {selectedModelInfo && (\n                <p className=\"text-sm text-gray-500\">{selectedModelInfo.provider} ¬∑ {selectedModelInfo.cost === 'free' ? 'Free' : 'Paid'}</p>\n              )}\n            </div>\n            {estimatedCost > 0 && (\n              <div className=\"text-right\">\n                <p className=\"text-xs text-gray-500\">Estimated next message cost</p>\n                <p className=\"text-lg font-bold text-indigo-600\">${estimatedCost.toFixed(6)}</p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Messages */}\n        <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\n          {messages.length === 0 && (\n            <div className=\"flex items-center justify-center h-full\">\n              <div className=\"text-center max-w-md\">\n                <div className=\"text-6xl mb-4\">üí¨</div>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Welcome to LLM Chat</h3>\n                <p className=\"text-gray-500\">\n                  {selectedModel \n                    ? 'Start chatting to test the selected model'\n                    : 'Select a model from the sidebar to begin'\n                  }\n                </p>\n              </div>\n            </div>\n          )}\n          \n          {messages.map(message => (\n            <div\n              key={message.id}\n              className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\n            >\n              <div\n                className={`max-w-3xl rounded-2xl px-5 py-3 ${\n                  message.role === 'user'\n                    ? 'bg-indigo-600 text-white'\n                    : 'bg-white text-gray-900 border border-gray-200 shadow-sm'\n                }`}\n              >\n                <div className=\"whitespace-pre-wrap break-words\">{message.content}</div>\n                \n                {/* Metadata for assistant messages */}\n                {message.role === 'assistant' && (message.tokens || message.cost !== undefined || message.latency) && (\n                  <div className=\"mt-3 pt-3 border-t border-gray-200 flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-500\">\n                    {message.modelUsed && (\n                      <span className=\"font-medium\">\n                        {models.find(m => m.id === message.modelUsed)?.name || message.modelUsed}\n                      </span>\n                    )}\n                    {message.tokens && <span>üéØ {message.tokens} tokens</span>}\n                    {message.cost !== undefined && (\n                      <span className=\"text-green-600 font-semibold\">\n                        üí∞ ${message.cost.toFixed(6)}\n                      </span>\n                    )}\n                    {message.latency && <span>‚ö° {message.latency}ms</span>}\n                  </div>\n                )}\n                \n                <div className={`text-xs mt-2 ${message.role === 'user' ? 'text-indigo-200' : 'text-gray-400'}`}>\n                  {message.timestamp.toLocaleTimeString()}\n                </div>\n              </div>\n            </div>\n          ))}\n          \n          {isLoading && (\n            <div className=\"flex justify-start\">\n              <div className=\"bg-white border border-gray-200 rounded-2xl px-5 py-3 shadow-sm\">\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"flex space-x-1\">\n                    <div className=\"w-2 h-2 bg-indigo-600 rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\n                    <div className=\"w-2 h-2 bg-indigo-600 rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\n                    <div className=\"w-2 h-2 bg-indigo-600 rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\n                  </div>\n                  <span className=\"text-gray-600 text-sm\">Thinking...</span>\n                </div>\n              </div>\n            </div>\n          )}\n          \n          <div ref={messagesEndRef} />\n        </div>\n\n        {/* Input */}\n        <div className=\"bg-white border-t border-gray-200 p-4\">\n          <div className=\"max-w-4xl mx-auto flex gap-3\">\n            <textarea\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder={selectedModel ? \"Type your message... (Shift+Enter for new line)\" : \"Select a model first...\"}\n              disabled={!selectedModel || isLoading}\n              className=\"flex-1 px-4 py-3 border border-gray-300 rounded-xl resize-none focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed\"\n              rows={3}\n            />\n            <button\n              onClick={sendMessage}\n              disabled={!input.trim() || !selectedModel || isLoading}\n              className=\"px-6 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center gap-2 font-medium\"\n            >\n              {isLoading ? (\n                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\n              ) : (\n                <>\n                  <Send className=\"w-5 h-5\" />\n                  Send\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}