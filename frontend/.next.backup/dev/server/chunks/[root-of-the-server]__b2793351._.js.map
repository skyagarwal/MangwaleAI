{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/api/vision/cameras/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\nconst IMAGE_AI_URL = process.env.IMAGE_AI_INTERNAL_URL || 'http://localhost:3000';\n\nexport async function GET(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url);\n    \n    // Build query string from search params\n    const params = new URLSearchParams();\n    if (searchParams.get('storeId')) params.append('storeId', searchParams.get('storeId')!);\n    if (searchParams.get('zone')) params.append('zone', searchParams.get('zone')!);\n    if (searchParams.get('status')) params.append('status', searchParams.get('status')!);\n\n    const queryString = params.toString();\n    const url = `${IMAGE_AI_URL}/cameras${queryString ? `?${queryString}` : ''}`;\n\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      return NextResponse.json(\n        { success: false, message: `Image AI service error: ${response.statusText}` },\n        { status: response.status }\n      );\n    }\n\n    const data = await response.json();\n    return NextResponse.json(data);\n\n  } catch (error) {\n    console.error('Camera list error:', error);\n    \n    return NextResponse.json(\n      { \n        success: false, \n        message: error instanceof Error ? error.message : 'Internal server error' \n      },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n\n    const response = await fetch(`${IMAGE_AI_URL}/cameras`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(body),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      return NextResponse.json(error, { status: response.status });\n    }\n\n    const data = await response.json();\n    return NextResponse.json(data);\n\n  } catch (error) {\n    console.error('Camera registration error:', error);\n    \n    return NextResponse.json(\n      { \n        success: false, \n        message: error instanceof Error ? error.message : 'Internal server error' \n      },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,eAAe,QAAQ,GAAG,CAAC,qBAAqB,IAAI;AAEnD,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAE5C,wCAAwC;QACxC,MAAM,SAAS,IAAI;QACnB,IAAI,aAAa,GAAG,CAAC,YAAY,OAAO,MAAM,CAAC,WAAW,aAAa,GAAG,CAAC;QAC3E,IAAI,aAAa,GAAG,CAAC,SAAS,OAAO,MAAM,CAAC,QAAQ,aAAa,GAAG,CAAC;QACrE,IAAI,aAAa,GAAG,CAAC,WAAW,OAAO,MAAM,CAAC,UAAU,aAAa,GAAG,CAAC;QAEzE,MAAM,cAAc,OAAO,QAAQ;QACnC,MAAM,MAAM,GAAG,aAAa,QAAQ,EAAE,cAAc,CAAC,CAAC,EAAE,aAAa,GAAG,IAAI;QAE5E,MAAM,WAAW,MAAM,MAAM;QAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,SAAS,CAAC,wBAAwB,EAAE,SAAS,UAAU,EAAE;YAAC,GAC5E;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAE9B;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,gJAAY,CAAC,IAAI,CAAC;IAE3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QAEpC,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QACpD,GACA;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,QAAQ,CAAC,EAAE;YACtD,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;QACvB;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;YACjC,OAAO,gJAAY,CAAC,IAAI,CAAC,OAAO;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAC5D;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,gJAAY,CAAC,IAAI,CAAC;IAE3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAE5C,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QACpD,GACA;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}