# ========================================
# üîç SEARCH API - ENVIRONMENT CONFIGURATION
# ========================================

# ----------------------------------------
# SERVER CONFIGURATION
# ----------------------------------------
PORT=3100
NODE_ENV=development
API_BASE_URL=http://localhost:3100

# ----------------------------------------
# üîí SECURITY CONFIGURATION
# ----------------------------------------

# API Key Authentication (default: disabled for development)
# Set to 'true' to enable API key validation
# When disabled, all endpoints are accessible without authentication
ENABLE_AUTH=false

# API Keys (comma-separated list)
# Format: key:name:tier:active
# Tiers: admin, partner, public
# Example: sk_live_abc123:Acme Corp:partner:true,sk_test_xyz789:Test Key:public:true
# 
# Rate limits by tier:
# - admin:   1000 req/min (no effective limit)
# - partner:  300 req/min
# - public:   100 req/min
API_KEYS=dev_key_12345:Development Key:admin:true,test_key_67890:Test Key:public:true

# CORS Allowed Origins (comma-separated)
# Specify which domains can make requests to this API
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3100,http://localhost:4000,https://opensearch.mangwale.ai,https://mangwale.ai

# ----------------------------------------
# DATABASE CONFIGURATION
# ----------------------------------------

# MySQL (Source of Truth)
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=your_password
MYSQL_DATABASE=mangwale_main

# OpenSearch (Search Engine)
OPENSEARCH_NODE=http://localhost:9200
OPENSEARCH_USERNAME=admin
OPENSEARCH_PASSWORD=admin
OPENSEARCH_SSL_VERIFY=false

# Redis (Caching & Session)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ----------------------------------------
# OPENSEARCH INDICES
# ----------------------------------------
OPENSEARCH_FOOD_ITEMS_INDEX=food_items_v4
OPENSEARCH_FOOD_STORES_INDEX=food_stores_v6
OPENSEARCH_FOOD_CATEGORIES_INDEX=food_categories
OPENSEARCH_ECOM_CATEGORIES_INDEX=ecom_categories

# ----------------------------------------
# EMBEDDING & AI SERVICES
# ----------------------------------------

# Embedding Service (for semantic search)
EMBEDDING_SERVICE_URL=http://localhost:5001
EMBEDDING_MODEL=all-MiniLM-L6-v2
EMBEDDING_DIM=384

# Food-specific embeddings
FOOD_EMBEDDING_DIM=768

# V3 NLU Services (Amazon-grade features)
INDICBERT_SERVICE_URL=http://localhost:8001
VLLM_SERVICE_URL=http://localhost:8002

# ----------------------------------------
# SEARCH CONFIGURATION
# ----------------------------------------

# Default search size
DEFAULT_SEARCH_SIZE=20
MAX_SEARCH_SIZE=100

# Hybrid search weights (BM25 + KNN)
BM25_WEIGHT=0.3
KNN_WEIGHT=0.7

# KNN parameters
KNN_K=50
KNN_EF_SEARCH=100

# ----------------------------------------
# RATE LIMITING
# ----------------------------------------

# Throttler configuration (managed by ThrottlerModule)
# Values are overridden by API key tier
THROTTLE_TTL=60000
THROTTLE_LIMIT=100

# ----------------------------------------
# LOGGING & MONITORING
# ----------------------------------------

# Log level (error, warn, log, debug, verbose)
LOG_LEVEL=log

# Enable audit logging (all requests/responses)
ENABLE_AUDIT_LOG=true

# Future: OpenSearch logs index
AUDIT_LOG_INDEX=search-audit-logs

# ----------------------------------------
# ZONE DETECTION
# ----------------------------------------

# Zone service for lat/lon ‚Üí zone_id lookup
ZONE_SERVICE_URL=http://localhost:3000/api/zones/detect

# ----------------------------------------
# CACHE CONFIGURATION
# ----------------------------------------

# Cache TTL (seconds)
SEARCH_CACHE_TTL=1800
EMBEDDING_CACHE_TTL=3600
CATEGORY_CACHE_TTL=3600

# ----------------------------------------
# ADMIN DASHBOARD
# ----------------------------------------

# Admin credentials (temporary - move to database)
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123

# ----------------------------------------
# EXTERNAL SERVICES
# ----------------------------------------

# Store service (for fetching store details)
STORE_SERVICE_URL=http://localhost:3000

# Notification service (future)
NOTIFICATION_SERVICE_URL=http://localhost:3000

# ----------------------------------------
# DEVELOPMENT & TESTING
# ----------------------------------------

# Enable debug mode (verbose logging)
DEBUG=false

# Enable Swagger UI
ENABLE_SWAGGER=true

# Swagger servers
SWAGGER_SERVERS=https://opensearch.mangwale.ai,http://localhost:4000,http://localhost:3100
